import{_ as j,a as P,b as q,c as B,d as C,e as O}from"./DN1-w6CV.js";import{_ as D}from"./C3Kc88JK.js";import{c as a,e as m,f as r,F as N,C as S,h as l,H as V,A as x,v as u,w as A,k as R,t as F,B as t,D as c,g as i}from"./YKJGr53e.js";import{u as g}from"./CTAIbY_z.js";import{q as H}from"./CHZsaEkH.js";import"./D7Q_Jaex.js";import"./DqSA5oGD.js";import"./KtzzS9P3.js";import"./BPUoiS4N.js";import"./C-gIM5Qq.js";import"./Di7j-vHa.js";import"./srjAdVVy.js";import"./DxjlTc0-.js";import"./BQkc-AXV.js";import"./B3pqwgWn.js";import"./s3-Ad5Vt.js";import"./DQV5yooY.js";import"./BgjWWMr1.js";import"./BHB5aYOm.js";import"./CNb5zuOU.js";const L={class:"w-full max-w-app my-24"},T=r("div",{class:"flex justify-center md:justify-start mb-16"},[r("h2",{class:"text-xl font-bold"},"Where to buy")],-1),E={class:"flex gap-12 items-center justify-center md:justify-start flex-wrap"},I={class:"shrink-0"},W=["href"],z={__name:"Stores",props:["stores"],setup(f){return(o,n)=>{const _=D;return a(),m("div",L,[T,r("div",E,[(a(!0),m(N,null,S(f.stores,e=>(a(),m("div",I,[r("a",{href:Object.values(e)[0],target:"_blank"},[l(_,{src:Object.keys(e)[0]+"/logo.webp",width:"200",height:"200",densities:"1x",class:"dark:invert"},null,8,["src"])],8,W)]))),256))])])}}},G={class:"flex flex-1 flex-col items-center mx-auto leading-relaxed lg:leading-loose w-full"},J={class:"lg:flex flex-grow w-full max-w-app mb-24"},K={class:"flex flex-grow items-center justify-center"},ue={__name:"index",async setup(f){let o,n;const _=V(),{data:e}=([o,n]=x(()=>g("product",()=>H(u().path).findOne())),o=await o,n(),o),{data:y}=([o,n]=x(async()=>g(async()=>{const{data:h}=await _.from("reviews").select("brand, model, elements(data)").eq("brand",u().params.brand).eq("model",u().params.model).eq("elements.type","score"),d=h.filter(s=>s.elements.length).map(s=>s.elements).flat().map(s=>s.data).map(s=>s.score);return d.reduce((s,p)=>s+p,0)/d.length},"$xytwOqDbBm")),o=await o,n(),o);return(h,d)=>{const s=j,p=P,w=q,b=B,v=C,k=O,$=z;return a(),m("div",G,[l(s,{doc:t(e)},{default:A(()=>[R(F(t(e).title),1)]),_:1},8,["doc"]),t(e).hero?(a(),c(p,{key:0,hero:t(e).hero},null,8,["hero"])):i("",!0),t(e).images?(a(),c(w,{key:1,images:t(e).images},null,8,["images"])):i("",!0),t(e).labels?(a(),c(b,{key:2,doc:t(e)},null,8,["doc"])):i("",!0),r("div",J,[r("div",K,[l(v,{rating:t(y)},null,8,["rating"])])]),l(k,{class:"mb-12 max-w-app"}),t(e).stores&&t(e).stores.length?(a(),c($,{key:3,stores:t(e).stores},null,8,["stores"])):i("",!0)])}}};export{ue as default};
