import{_ as v,a as B,b as P,c as $,d as k,e as V}from"./DN1-w6CV.js";import{H as q,A as _,v as l,c as p,e as C,h as r,B as a,D as d,g as u,f}from"./YKJGr53e.js";import{u as g}from"./CTAIbY_z.js";import{q as A}from"./CHZsaEkH.js";import"./C3Kc88JK.js";import"./BgjWWMr1.js";import"./BHB5aYOm.js";import"./D7Q_Jaex.js";import"./DqSA5oGD.js";import"./KtzzS9P3.js";import"./BPUoiS4N.js";import"./C-gIM5Qq.js";import"./Di7j-vHa.js";import"./srjAdVVy.js";import"./DxjlTc0-.js";import"./BQkc-AXV.js";import"./B3pqwgWn.js";import"./s3-Ad5Vt.js";import"./DQV5yooY.js";import"./CNb5zuOU.js";const D={class:"flex flex-1 flex-col items-center mx-auto leading-relaxed lg:leading-loose w-full"},N={class:"lg:flex flex-grow w-full max-w-app mb-24"},R={class:"flex flex-grow items-center justify-center"},te={__name:"index",async setup(H){let t,s;const x=q(),{data:o}=([t,s]=_(()=>g("product",()=>A(l().path).findOne())),t=await t,s(),t),{data:h}=([t,s]=_(async()=>g(async()=>{const{data:n}=await x.from("reviews").select("brand, model, elements(data)").eq("brand",l().params.brand).eq("model",l().params.model).in("elements.type",["score","signature"]),m=n.filter(e=>e.elements.length).map(e=>e.elements).flat().map(e=>e.data).map(e=>e.score).filter(Boolean),c=n.filter(e=>e.elements.length).map(e=>e.elements).flat().map(e=>e.data).map(e=>e.signature);return{rating:m.reduce((e,i)=>e+i,0)/m.length,signature:c}},"$ypVmgagwVl")),t=await t,s(),t);return(n,m)=>{const c=v,e=B,i=P,w=$,y=k,b=V;return p(),C("div",D,[r(c,{doc:a(o)},null,8,["doc"]),a(o).hero?(p(),d(e,{key:0,hero:a(o).hero},null,8,["hero"])):u("",!0),a(o).images?(p(),d(i,{key:1,images:a(o).images},null,8,["images"])):u("",!0),r(w,{doc:a(o),signature:n.signature},null,8,["doc","signature"]),f("div",N,[f("div",R,[r(y,{rating:a(h).rating},null,8,["rating"])])]),r(b,{class:"mb-12 max-w-app"})])}}};export{te as default};
