import{_ as I,a as M,b as S}from"./VVZAQmSn.js";import{_ as T}from"./Be1HZvcP.js";import{r as p,H as D,c as d,e as m,f as l,h as x,n as v,B as o,F as q,C as N,t as w,D as U,S as h,Q as C,V,k as E,G as F}from"./YKJGr53e.js";import{u as P}from"./s3-Ad5Vt.js";import{u}from"./DQV5yooY.js";import"./srjAdVVy.js";import"./DxjlTc0-.js";import"./BQkc-AXV.js";import"./j4F_aXRO.js";import"./KtzzS9P3.js";import"./CTAIbY_z.js";import"./CHZsaEkH.js";import"./CNb5zuOU.js";import"./Be8J6HL0.js";import"./CBpMDLrE.js";import"./BboEKukF.js";import"./BIqF7sE6.js";import"./BGcilHqP.js";const j={class:"max-w-app mx-auto flex-1 flex flex-col items-center justify-center"},z={class:"flex gap-6 lg:gap-12 mb-16"},G={class:"mb-12"},H={class:"bg-red-100 rounded-lg px-5 py-4"},L={class:"text-3xl font-bold mb-6"},Q={key:1,class:"mt-6"},R=l("div",{class:"font-semibold"},"Brand",-1),Y=l("div",{class:"font-semibold mt-6"},"Model",-1),A=l("div",{class:"border rounded ml-2 px-2 py-0.5 hover:bg-gray-100 dark:hover:bg-gray-700 dark:border-gray-600 transition"},"Enter manually",-1),ce={__name:"new",setup(J){const r=p(!1),a=p(),n=p(),i=p(),s=p("iem"),g=D(),y=P(),f=p([]),$=async()=>{const k=Math.random().toString(36).substring(2,9);if(!r.value){const{data:e}=await g.from("reviews").select().eq("brand",u(a.value.brand)).eq("model",u(a.value.model)).eq("profile_id",y.value.id);e&&e.length&&f.value.push("You already wrote a review for this IEM")}if(!f.value.length&&(a.value||n.value&&i.value)){const e=r.value?u(n.value):u(a.value.brand),c=r.value?u(i.value):u(a.value.model),b=r.value?u(n.value+" "+i.value):a.value.title;await g.from("reviews").insert({slug:k,brand:e,model:c,type:s.value,product_title:b,profile_id:y.value.id});const{data:_}=await g.from("profiles").select().eq("id",y.value.id).single();await F(`/reviews/${_.username}/${e}/${c}/edit`)}};return(k,e)=>{const c=I,b=M,_=S,B=T;return d(),m("div",j,[l("ul",z,[l("li",null,[x(c,{class:v(["w-20 h-20 lg:w-32 lg:h-32 cursor-pointer",[o(s)=="iem"?"opacity-100":"opacity-40"]]),onClick:e[0]||(e[0]=t=>s.value="iem")},null,8,["class"])]),l("li",null,[x(b,{class:v(["w-20 h-20 lg:w-32 lg:h-32 cursor-pointer",[o(s)=="dap"?"opacity-100":"opacity-40"]]),onClick:e[1]||(e[1]=t=>s.value="dap")},null,8,["class"])]),l("li",null,[x(_,{class:v(["w-20 h-20 lg:w-32 lg:h-32 cursor-pointer",[o(s)=="dac"?"opacity-100":"opacity-40"]]),onClick:e[2]||(e[2]=t=>s.value="dac")},null,8,["class"])])]),l("ul",G,[(d(!0),m(q,null,N(o(f),t=>(d(),m("li",H,w(t),1))),256))]),l("h1",L,"Choose "+w(o(s))+" model",1),o(r)?(d(),m("div",Q,[R,C(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>h(n)?n.value=t:null),type:"text",class:"border rounded-lg px-5 py-4 w-[400px] text-sm dark:bg-gray-800 dark:border-gray-600 focus:outline-none",placeholder:"Type the brand and model name"},null,512),[[V,o(n)]]),Y,C(l("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>h(i)?i.value=t:null),type:"text",class:"border rounded-lg px-5 py-4 w-[400px] text-sm dark:bg-gray-800 dark:border-gray-600 focus:outline-none",placeholder:"Type the brand and model name"},null,512),[[V,o(i)]])])):(d(),U(B,{key:0,modelValue:o(a),"onUpdate:modelValue":e[3]||(e[3]=t=>h(a)?a.value=t:null),model:o(s)},null,8,["modelValue","model"])),o(r)?(d(),m("div",{key:3,class:"border rounded ml-2 px-2 py-0.5 hover:bg-gray-100 transition text-sm mt-5 cursor-pointer dark:hover:bg-gray-700 dark:border-gray-600",onClick:e[7]||(e[7]=t=>r.value=!1)},"Choose from list")):(d(),m("div",{key:2,class:"text-sm mt-5 cursor-pointer flex items-center",onClick:e[6]||(e[6]=t=>r.value=!0)},[E("Item not in list? "),A])),l("div",{class:v(["mt-6 rounded-lg px-4 py-2 bg-green-700 text-white opacity-0 cursor-default hover:bg-green-800",{"opacity-100 cursor-pointer":o(a)||o(i)&&o(n)}]),onClick:$},"Next",2)])}}};export{ce as default};
